### Hr面

职业规划对未来的规划：

1.职业发展技术上

​    深度  java多线程  redis mysql kafka ， 分布式服务 分布式事务  等技术上深入学习并在项目中应用，增加技术深度

​	横向 计算机原理， 操作系统等方向上多做学习和理解

2.职业发展业务上

刚开始作为程序员的职业生涯，希望自己可以在一个稳定的业务方向上，对于这一块的业务吃透。比如说强哥说蚂蚁我们这个组就是做理财业务中的1交易领域 流程、状态推进 2账户领域 3理财产品领域    涉及到的业务有基金、私募、专户、理财子、存款、养老险、信托等。计划在工作的同时学习这些业务知识，因为不仅仅是为了工作，理财产品的学习对于个人来说也是听必要的嘛。

3.职业等级上：另一方面俗一点，升级加薪嘛，目标是五年之内/30岁升到p7，能够独立带项目，设计新项目的技术架构。

4.个人生活规划方面

近期的目标是在上海买房结婚，已经有户口，女朋友在上海工作。

学习方式：

后端开发，

视频, 博客：优点上手快，缺点不深入，质量层次不齐

高质量技术博客，美团技术博客，阿里云云栖号

师父推荐的优秀书籍： ddia 。。。

最重要的学习方式是在实际工作的业务场景中去排查和解决问题。





项目里遇到的难点以及总结出哪些应对的经验：



1.那次练习的bug，统计去重人数，联系记录表的state设计

以及多端同时登陆的bug

经验：设计一个系统的时候不仅要考虑主要情况下流程是否合理，也要有一定的测试思维，考虑在极端情况下设计的程序流程是否有疏漏。 做程序的时候考虑多次重入会不会产生不好的后果。

2.统计去重人数时用redis string+zset 定时持久化冷数据



项目里印象深刻的事情：

bad kafka重复调用新建producer导致的bug。那天回滚了，然后检查

good 我的练习上线投入使用



对过往经历的总结：

在贝壳的几个月成长颇多，虽然是B端的项目，但是企业级应用和自己做的项目有蛮多区别。在贝壳我接触到了完善的服务监控系统，对服务节点的cpu、内存等状态，对线上报的5xx4xx实时监控和报警。以及慢sql监控系统。还有很多，比如用了配置中心appolo同一管理配置。

除此之外，在项目中早早地参与到了题练考系统的设计，虽然很烧脑，但是过程很有趣。培训中台的设计有很多有趣的地方，比如题目不可变原则，题目的版本号机制，当题目被试卷引用的时候产生新的版本号，修改题库题目并不会修改试卷的题目。

学习氛围很好，后端都会在工位上有技术书籍，互相分享技术知识。



### 技术终面：

​	**1.把当前系统改成toc(高并发大流量)考虑做哪些优化？**

​		 1部署更多的节点，负载均衡 nginx dubbo

​         2 网关检测一些爬虫，拦截非法请求，封禁一些异常ip，比如说之前有人用接口刷答案，过滤无效请求

​         3 mysql的主从复制读写分离。集群化部署，redis的集群化部署，主从，哨兵，cluster

​            数据库在数据量较大的情况下的分库分表(一致性hash)

​			数据库查询语句的索引优化

​			数据库提供批量读写，减少io次数，比如一个题库的题目，抽到的题目一个一个查询会有很多io，但是提供批量查询的接口会快很多，可以缓存起来。

​         4 缓存采用分布式缓存+本地缓存的组合。 多级缓存 

​			本地缓存用静态变量、成员变量 map之类的实现

​			常用的缓存数据可以预热

​           缓存和数据库表在水平拆分后用一致性hash算法保证请求打到对应的节点上

​		5 数据的预处理

​			比如考试大量用户进来都需要调用圈人的微服务来判断这次考试的参与权限，那可以提前把这次考试圈的人user给缓存下来，到时候判断权限就不走微服务了。

​		6 池化计数，数据库连接池，线程池

​         7 用springcloud的hytrix服务熔断服务降级，比如复杂的抽题接口实现了丰富的抽题能力，但是有性能瓶颈做降级变成简单的纯随机抽题。

​         8使用消息队列kafka对业务进行削峰，异步，解耦。 对于不需要严格顺序的业务可以异步执行提高效率。比如答题后的各种数据分析。可以交给kafka延后处理，主流程直接告诉用户答题结束了

​         9严格把关代码质量，对接口性能做压测，对于qps不高的接口技改，提升能力

​		10 异步

​          rxjava，调接口的时候异步，减少阻塞时常

​         11**限流**

​         **高可用：**

​          1.集群化部署，故障时转移，主备切换

​          2.服务熔断服务降级

​          3.接口层面的超时设置、重试策略和幂等设计

​          4.监控报警系统，监控节点CPU、内存、磁盘、网络等指标，监控慢sql

​       

2. ###### 抢购的场景设计(秒杀系统)

   **https://www.zhihu.com/question/357704749/answer/2176887928**

   https://developer.aliyun.com/article/69704

   https://www.zhihu.com/question/54895548/answer/923987542

   https://zhuanlan.zhihu.com/p/92659201

   技术总结：

   多机层面：增加集群节点数+负载均衡

   单机层面：

   订票系统要处理生成订单、减扣库存、用户支付这三个基本的阶段。

   要保证火车票订单不超卖、不少卖，每张售卖的车票都必须支付才有效

   

   1.网关拦截恶意请求，一个uid短时间内请求多次，可能是抢票软件之类的（可以有效减少请求量）。

   2.限流 前端限流：1.开售前置灰按钮2开售后同一个用户的点击设置间隔时间，对同一个uid限流 3开售后用答题/验证码来延缓瞬时流量，阻隔秒杀机器产生的请求

   

   3.对去库存的请求放入消息队列削峰限流，当kafka积压消息远大于库存的时候，或者库存用完了之后，可以直接给用户返回抢购失败的结果，不参与竞争了。然后再把扣库存的消息处理掉。

   4.总库存存放在redis当中，集群化部署，提升redis的并发处理能力。也可以多个节点分配一些库存，扣库存的时候，本地库存和总库存都扣。

   解决超卖：redis扣库存中需要做(判断库存>0)+(库存--)操作，这是非原子性的。用redis的lua脚本保证这两个行为的原子性。

   5.扣完库存把信息放在消息队列中，交给订单服务生成订单

   6.扣库存和发送订单消息两件事情需要一致性，用事务型消息

   7.订单相当于是个冷冻库存设置超时时间，在时间内支付成功。若超时未支付成功则重新放回库存，库存数量+1。

​    3. B端和C端你觉得的区别

​       1.流量大小，并发能力不一样

​       2. c端产品的口碑，讨论度，出问题时产生的影响都更大

   4. 自己做的项目和公司项目的区别

      1.并发量需要考虑，需要压测，改进，优化sql

      2.接口访问权限和给前端的数据敏感性要特别考虑，比如题目的题号。

      

      5.在携程学到了什么？

       1.ab测试 2powermock 3qconfig  shark等完善的系统
      
      